# クオリアと記憶の力学 設計図

---

## 入力の分類

### 全ての入力は物理クオリア

```
入力（電気信号）
├── 外部入力: 光、音、触覚、味、匂い...
└── 内部入力: 体内状態の変化（損傷、温度、圧力、化学変化...）
        ↓
    全て物理クオリアとして処理
```

### ホルモンは中間産物（入力ではない）

```
物理クオリア（入力）
  ↓
脳の判断「やばい」「嬉しい」等
  ↓
ホルモン分泌（出力・体内への指令）
  ├── コルチゾール → 血糖上昇、免疫抑制...
  ├── アドレナリン → 心拍上昇、筋肉緊張...
  └── セロトニン → 気分安定...
  ↓
体内状態が変化
  ↓
その変化をセンサーが検知
  ↓
物理クオリア（入力）← ループ
```

**重要：**
- ホルモン自体は「入力」ではなく「処理の途中で出る指令」
- 入力になるのはホルモンの「結果」（心拍変化、筋緊張等）
- 外部も内部も、最終的に電気信号→物理クオリアとして統一処理

---

## 疲労のメカニズム（最新研究に基づく）

### 身体疲労の信号経路

```
筋肉活動・運動
  ↓
ATP生産（エネルギー生成）
  ↓
副産物として活性酸素が発生
  ↓
活性酸素が細胞を損傷（酸化ストレス）
  ↓
免疫細胞が損傷を検知
  ↓
サイトカイン（伝達物質）を放出
  ↓
脳へ電気信号として伝達（第1層入力）
  ↓
物理クオリア「だるい」「筋肉が重い」「体が熱い」
  ↓
感情クオリア「疲れた」
```

**注意：乳酸は疲労物質ではない**
- 乳酸原因説は否定された（2010年代に確定）
- 乳酸はむしろエネルギー源として筋肉・脳・心臓で利用される
- 試合後半で乳酸濃度が下がっても疲労は増す → 乳酸≠疲労

### 精神疲労の信号経路

```
ストレス刺激（視覚、聴覚、言語等）
  ↓
物理クオリアとして入力
  ↓
脳が「脅威」と判断
  ↓
視床下部 → 下垂体 → 副腎皮質
  ↓
コルチゾール分泌（体内への指令）
  ↓
体内状態の変化：
├── 血糖値上昇
├── 心拍・血圧変化
├── 筋緊張
└── 神経伝達物質バランス変化
  ↓
これらの変化をセンサーが検知 → 電気信号
  ↓
物理クオリア「頭が重い」「胸が詰まる」「目がかすむ」
  ↓
感情クオリア「疲れた」「やる気が出ない」「集中できない」
  ↓
（さらにストレスと判断されればループ継続）
```

### 疲労の本質

```
身体疲労も精神疲労も：
  入力: 物理クオリア
  処理: 脳の判断 → ホルモン等の指令
  結果: 体内状態変化
  入力: また物理クオリア ← ループ

ホルモンは「入力」ではなく「処理過程の中間産物」
最初も最後も物理クオリア
```

---

## 物理クオリア

### 構造

```python
physical_qualia = {
    'signal_pattern': [0.7, 0.2, ...],  # 電気信号パターン
    'source': 'external',                # 'external' or 'internal'
    'sensor_type': 'visual',             # visual, auditory, tactile, chemical, hormonal, immune...
    'dna_value': -0.9,                   # DNA初期値（出発点）
    'learned_value': -0.5,               # 学習による上書き
    'current_value': -0.5,               # 現在の値（快/不快）
    'label': '痛い'                      # 言語ラベル
}
```

### 入力源の分類

```python
source_types = {
    'external': {
        'visual': '光、色、形...',
        'auditory': '音、声...',
        'tactile': '触覚、圧力、温度...',
        'gustatory': '味...',
        'olfactory': '匂い...'
    },
    'internal': {
        'damage': '細胞損傷、炎症...',
        'metabolic': '血糖変化、酸素濃度...',
        'cardiovascular': '心拍、血圧...',
        'muscular': '筋緊張、筋収縮状態...',
        'thermal': '体温変化...'
    }
}
# 注：ホルモンは入力ではなく、これらの変化を引き起こす「指令」
```

### 生成条件

1. 電気信号パターンが繰り返し現れる（外部 or 内部）
2. 親が言葉を教える「これは痛いね」「疲れたね」
3. パターン + DNA値 + 言葉 → 物理クオリア完成
4. DNA値は出発点、学習で上書き可能

---

## 感情クオリア

### 基本感情クオリア

```python
emotional_qualia_basic = {
    'input': physical_qualia_pattern,    # 物理クオリアが入力
    'dna_value': -0.7,                   # 初期値あり（由来は問わない）
    'learned_value': -0.5,               # 学習で変化
    'current_value': -0.5,
    'label': '怖い'
}
```

**入力は物理クオリア：**
```
心拍上昇 + 発汗 + 筋緊張（物理クオリア群）
  ↓
「怖い」（感情クオリア）
```

### 複雑感情クオリア

```python
emotional_qualia_complex = {
    'components': [
        ('不安', -0.4),
        ('わくわく', +0.6),
        ('緊張', -0.3),
        ('達成感', +0.7)
    ],
    'total_value': +0.6,                 # 合計
    'label': 'githubに上げたときの感じ'   # 情報圧縮
}
```

**成長と共に増える：**
```
子供：基本感情クオリア数種類
  ↓
大人：組み合わせによる複雑な感情
  ↓
名前をつける → 情報圧縮 → 効率化
```

---

## 記憶の本質

### 記憶とは何か

```
【従来の記憶観】❌
記憶 = 過去のデータを保存 → 必要時に取り出す
     = ハードディスク的
     = 固定された情報

【5層モデルの記憶観】✓
記憶 = 過去と現在を統合処理するプロセス
     = 呼び出すたびに「今」と混ざる
     = 毎回再構成される
     = 動的な処理
```

### これが説明できること

```
- 同じ記憶でも気分で違う印象になる
- 時間が経つと記憶が変わる
- 「あの時は楽しかった」が後から作られる
- トラウマも再処理で変化しうる
- 思い出すたびに記憶が上書きされる
```

### 実装への示唆

```python
def recall_memory(memory, current_state):
    # 記憶は「取り出す」のではなく「再構成する」
    reconstructed = {
        'original': memory,
        'current_qualia': current_state.qualia,      # 今のクオリア
        'current_emotion': current_state.emotion,    # 今の感情
        'result': integrate(memory, current_state)   # 統合処理
    }
    # 呼び出すたびに少し変わる
    return reconstructed
```

---

## 記憶の構造

### 基本構造

```python
memory = {
    'image': [...],                              # 映像データ
    'label': 'あのときの夕日',                   # 言語ラベル
    'physical_qualia': ['赤い', '暖かい'],       # 物理クオリア配列
    'emotional_qualia': ['寂しい', '安心'],      # 感情クオリア配列
    'timestamp': '2024-08-15T18:30:00',          # 記憶形成時刻
    'strength': 0.8                              # 記憶強度
}
```

### アクセス方法

```
言葉で検索 → ラベルマッチ → 記憶呼び出し
映像で検索 → パターン類似度 → 記憶呼び出し
クオリアで検索 → 配列マッチ → 記憶呼び出し
```

### 相互参照

```
「夕日」（言葉）
  ↓
記憶呼び出し
  ↓
「赤い」「暖かい」「寂しい」が一緒に出てくる

「寂しい」（感情クオリア）
  ↓
記憶検索
  ↓
「夕日」の記憶がヒット
```

---

## 層間の関係

```
第1層（身体）
  ↓ 電気信号
第2層（クオリア）
  ├── 物理クオリア ←── 外部 + 内部入力
  └── 感情クオリア ←── 物理クオリアが入力
  ↓
第3層（構造化）←── 予測、パターン認識
  ↓
第4層（記憶）←── 映像 + 言葉 + クオリア配列
  ↓
第5層（意識）←── 全層同期で創発
```

---

## 実装時の注意

### DNA初期値

```python
# 確実にDNA由来
dna_certain = {
    'pain': -0.9,        # 痛い = 不快
    'sweet': +0.5,       # 甘い = 快
    'bitter': -0.8,      # 苦い = 不快（毒回避）
    'warm': +0.6,        # 暖かい = 快
    'cold_extreme': -0.7 # 極端な寒さ = 不快
}

# 由来不明だが初期値はある
dna_uncertain = {
    'fear': ???,         # 恐怖（DNA？学習？）
    'social_comfort': ???  # 社会的安心（DNA？学習？）
}
# → 「初期値がある」とだけ仮定、由来は問わない
```

### 疲労の実装例

```python
class FatigueSystem:
    def __init__(self):
        self.oxidative_stress = 0.0      # 活性酸素蓄積
        self.cortisol_level = 0.5        # コルチゾール（正常値）
        self.recovery_rate = 0.1         # 回復速度
        
    def physical_activity(self, intensity, duration):
        # 活動による活性酸素蓄積
        self.oxidative_stress += intensity * duration * 0.1
        return self.generate_fatigue_signal()
        
    def mental_stress(self, stress_level, duration):
        # ストレスによるコルチゾール上昇
        self.cortisol_level += stress_level * duration * 0.05
        return self.generate_fatigue_signal()
        
    def generate_fatigue_signal(self):
        # 電気信号として第1層に入力
        signal = {
            'source': 'internal',
            'sensor_type': 'immune' if self.oxidative_stress > 0.5 else 'hormonal',
            'pattern': [self.oxidative_stress, self.cortisol_level],
            'intensity': max(self.oxidative_stress, self.cortisol_level - 0.5)
        }
        return signal
        
    def sleep(self, quality, hours):
        # 睡眠による回復
        recovery = quality * hours * self.recovery_rate
        self.oxidative_stress = max(0, self.oxidative_stress - recovery)
        self.cortisol_level = max(0.3, self.cortisol_level - recovery * 0.5)
```

---

## 解決済みの問い

1. **感情クオリア（基本）のDNA由来は？** → 解決
   - 双子研究で感情の遺伝率は20-40%程度と判明
   - 恐怖を感じる神経回路自体はDNA由来
   - 感度・持続は遺伝子型で個人差
   - 具体的な対象は学習
   - **実装方針：「初期値がある」とだけ仮定、由来は問わない**

2. **乳酸とストレスの関係は？** → 解決
   - 乳酸 → BDNF増加（脳に良い）
   - コルチゾール → BDNF抑制
   - 運動時は両方出るが拮抗してバランス
   - デスクワークは乳酸なし → ストレスが残る

## 未解決の問い

1. **記憶とクオリアの相互参照の詳細力学**
   - どの程度の類似度で記憶が呼び出されるか？
   - 閾値の設定
   - → 実装しながら試行錯誤で調整（Phase 6-7で実験）

2. **疲労回復のメカニズム**
   - 睡眠中に何が起きているか？
   - 疲労回復因子（タンパク質）の詳細
   - → お手上げ。専門家に任せる。🙌

---

## 更新履歴

- 2024-11-28: 疲労メカニズムを最新研究に基づき更新
  - 乳酸原因説の否定を反映
  - 活性酸素・免疫サイトカイン経路を追加
  - ホルモンは「入力」ではなく「中間産物（指令）」に整理
  - 物理クオリア → ホルモン → 体内変化 → 物理クオリア のループ構造を明確化
  - 入力は全て物理クオリアで統一
- 2024-11-28: 乳酸とBDNF/コルチゾールの拮抗関係を追加
- 2024-11-28: 感情クオリアの遺伝率（20-40%）を確認、「初期値あり」で実装方針確定
- 2024-11-28: 記憶の本質を追加（「過去の保存」ではなく「過去と現在の統合処理」）
