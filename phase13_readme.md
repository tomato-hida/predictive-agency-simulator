# Phase 13: PyBullet Simulation
# 飛騨の行動コードでロボットを動かす

## 概要

Phase 12 で生成した行動コードを、実際にロボットシミュレーションで動かす。
ソフトウェアからハードウェアへの接続が完成。

## 何が動くか

```
青い箱 = ロボット（飛騨）
赤い球 = ボール（対象物）
```

## 行動コード → 実際の動き

| action | 動作 |
|--------|------|
| search | ボールを探す（周囲を見回す） |
| pick_up | ボールに近づいて拾う |
| carry | 持っている物を運ぶ |
| put_down | 持っている物を置く |
| stop | その場で停止 |
| come | 原点に戻る |
| wait | その場で待機 |
| follow | ボールを追いかける |

## 実行方法

### デモモード（自動実行）

```bash
python phase13_pybullet_simulation.py demo
```

5秒後に自動で行動シーケンスを実行：
1. ボールを探す
2. ボールを拾う
3. ボールを運ぶ
4. ボールを置く
5. 原点に戻る

### 対話モード（自分で操作）

```bash
python phase13_pybullet_simulation.py
```

行動コードを入力してロボットを動かす。
`q` で終了。

## 完成した流れ

```
【Phase 12】言語理解
人間「ボール拾って」
  ↓
pick_up と理解
  ↓
【Phase 13】シミュレーション
ロボットがボールに近づく
  ↓
ボールを拾う
  ↓
完了！
```

## 必要環境

- Python 3.x
- PyBullet（`pip install pybullet`）
- Visual C++ Build Tools（Windows の場合、PyBullet ビルドに必要）

## 技術的なこと

### PyBullet について

- 物理演算エンジン
- ロボットシミュレーションに広く使われる
- GPU 対応（RTX 5070 で動作確認済み）

### シミュレーション環境

- 重力: -10 m/s²
- 床: plane.urdf（PyBullet 標準）
- ロボット: 0.6m x 0.4m x 0.2m の箱
- ボール: 半径 0.2m の球

## Phase 12 との連携

```python
# Phase 12 で行動コードを取得
action = "pick_up"

# Phase 13 で実行
sim = HidaRobotSimulation()
result = sim.execute_action(action)
print(result)  # "ボールを拾いました"
```

## 次のステップ

### ソフトウェア側
- Phase 12 と Phase 13 の統合
- 言語コマンド → 行動コード → シミュレーション の一気通貫

### センサー入力
- カメラ画像の取得
- 物体認識（ボールの位置検出）
- 飛騨へのフィードバック

### より複雑な行動
- 複合コマンド（「取って持ってきて」）
- 障害物回避
- 経路計画

## 農閑期2日目の成果

```
感じる ✓（クオリア）
覚える ✓（永続記憶）
学ぶ ✓（人間 / LLM から）
理解する ✓（言語 → 行動）
行動する ✓（シミュレーション）← これ

ソフトからハードまで繋がった！
```
